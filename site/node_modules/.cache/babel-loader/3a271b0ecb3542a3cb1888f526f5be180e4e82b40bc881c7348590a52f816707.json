{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar react_1 = __importStar(require(\"react\"));\nvar react_fast_compare_1 = __importDefault(require(\"react-fast-compare\"));\nvar styles_1 = __importDefault(require(\"./styles\"));\nvar constants_1 = require(\"./constants\");\nvar draw_1 = __importDefault(require(\"./draw\"));\nvar events_1 = require(\"./events\");\n__exportStar(require(\"./types\"), exports);\nvar ImageMapper = function (props) {\n  var containerRef = props.containerRef,\n    active = props.active,\n    disabled = props.disabled,\n    fillColorProp = props.fillColor,\n    lineWidthProp = props.lineWidth,\n    mapProp = props.map,\n    srcProp = props.src,\n    strokeColorProp = props.strokeColor,\n    natural = props.natural,\n    heightProp = props.height,\n    widthProp = props.width,\n    imageWidthProp = props.imgWidth,\n    areaKeyName = props.areaKeyName,\n    stayHighlighted = props.stayHighlighted,\n    stayMultiHighlighted = props.stayMultiHighlighted,\n    toggleHighlighted = props.toggleHighlighted,\n    parentWidth = props.parentWidth,\n    responsive = props.responsive,\n    onLoad = props.onLoad,\n    onMouseEnter = props.onMouseEnter,\n    onMouseLeave = props.onMouseLeave,\n    onClick = props.onClick;\n  var _a = (0, react_1.useState)(mapProp),\n    map = _a[0],\n    setMap = _a[1];\n  var _b = (0, react_1.useState)(map),\n    storedMap = _b[0],\n    setStoredMap = _b[1];\n  var _c = (0, react_1.useState)(false),\n    isRendered = _c[0],\n    setRendered = _c[1];\n  var _d = (0, react_1.useState)(null),\n    imgRef = _d[0],\n    setImgRef = _d[1];\n  var container = (0, react_1.useRef)(null);\n  var img = (0, react_1.useRef)(null);\n  var canvas = (0, react_1.useRef)(null);\n  var ctx = (0, react_1.useRef)(null);\n  var isInitialMount = (0, react_1.useRef)(true);\n  (0, react_1.useEffect)(function () {\n    initCanvas(true);\n    ctx.current = canvas.current.getContext('2d');\n    updateCacheMap();\n    setRendered(true);\n  }, []);\n  (0, react_1.useEffect)(function () {\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n    } else {\n      updateCacheMap();\n      initCanvas();\n      if (imgRef) updateCanvas();\n    }\n  }, [props, isInitialMount, imgRef]);\n  (0, react_1.useEffect)(function () {\n    container.current.clearHighlightedArea = function () {\n      setMap(storedMap);\n      initCanvas();\n    };\n    if (containerRef) {\n      containerRef.current = container.current;\n    }\n  }, [imgRef]);\n  (0, react_1.useEffect)(function () {\n    if (responsive) initCanvas();\n  }, [parentWidth]);\n  var updateCacheMap = function () {\n    setMap(mapProp);\n    setStoredMap(mapProp);\n  };\n  var getDimensions = function (type) {\n    var _a = props,\n      _b = type,\n      dimension = _a[_b];\n    if (typeof dimension === 'function') {\n      // @ts-ignore\n      return dimension(img.current);\n    }\n    return dimension;\n  };\n  var getValues = function (type, measure, name) {\n    if (name === void 0) {\n      name = 'area';\n    }\n    var _a = img.current,\n      naturalWidth = _a.naturalWidth,\n      naturalHeight = _a.naturalHeight,\n      clientWidth = _a.clientWidth,\n      clientHeight = _a.clientHeight;\n    if (type === 'width') {\n      if (responsive) return parentWidth;\n      if (natural) return naturalWidth;\n      if (widthProp || name === 'image') return measure;\n      return clientWidth;\n    }\n    if (type === 'height') {\n      if (responsive) return clientHeight;\n      if (natural) return naturalHeight;\n      if (heightProp || name === 'image') return measure;\n      return clientHeight;\n    }\n    return 0;\n  };\n  var initCanvas = function (firstLoad) {\n    if (firstLoad === void 0) {\n      firstLoad = false;\n    }\n    if (!firstLoad && !imgRef) return;\n    var imgWidth = getDimensions('width');\n    var imgHeight = getDimensions('height');\n    var imageWidth = getValues('width', imgWidth);\n    var imageHeight = getValues('height', imgHeight);\n    if (widthProp || responsive) {\n      img.current.width = getValues('width', imgWidth, 'image');\n    }\n    if (heightProp || responsive) {\n      img.current.height = getValues('height', imgHeight, 'image');\n    }\n    canvas.current.width = imageWidth;\n    canvas.current.height = imageHeight;\n    container.current.style.width = \"\".concat(imageWidth, \"px\");\n    container.current.style.height = \"\".concat(imageHeight, \"px\");\n    ctx.current = canvas.current.getContext('2d');\n    ctx.current.fillStyle = fillColorProp;\n    if (onLoad && imgRef) {\n      onLoad(img.current, {\n        width: imageWidth,\n        height: imageHeight\n      });\n    }\n    setImgRef(img.current);\n    if (imgRef) renderPrefilledAreas();\n  };\n  var hoverOn = function (area, index, event) {\n    var shape = area.shape,\n      scaledCoords = area.scaledCoords,\n      fillColor = area.fillColor,\n      lineWidth = area.lineWidth,\n      strokeColor = area.strokeColor,\n      isAreaActive = area.active;\n    if (active) {\n      (0, draw_1.default)(shape, scaledCoords, fillColor || fillColorProp, lineWidth || lineWidthProp, strokeColor || strokeColorProp, isAreaActive !== null && isAreaActive !== void 0 ? isAreaActive : true, ctx);\n    }\n    if (onMouseEnter) onMouseEnter(area, index, event);\n  };\n  var hoverOff = function (area, index, event) {\n    if (active) {\n      ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n      renderPrefilledAreas();\n    }\n    if (onMouseLeave) onMouseLeave(area, index, event);\n  };\n  var click = function (area, index, event) {\n    var _a;\n    var isAreaActive = (_a = area.active) !== null && _a !== void 0 ? _a : true;\n    if (isAreaActive && (stayHighlighted || stayMultiHighlighted || toggleHighlighted)) {\n      var newArea_1 = __assign({}, area);\n      var chosenArea = stayMultiHighlighted ? map : storedMap;\n      if (toggleHighlighted && newArea_1.preFillColor) {\n        delete newArea_1.preFillColor;\n      } else if (stayHighlighted || stayMultiHighlighted) {\n        newArea_1.preFillColor = area.fillColor || fillColorProp;\n      }\n      var updatedAreas_1 = chosenArea.areas.map(function (cur) {\n        return cur[areaKeyName] === area[areaKeyName] ? newArea_1 : cur;\n      });\n      setMap(function (prev) {\n        return __assign(__assign({}, prev), {\n          areas: updatedAreas_1\n        });\n      });\n    }\n    if (onClick) {\n      event.preventDefault();\n      onClick(area, index, event);\n    }\n  };\n  var scaleCoords = function (coords) {\n    var scale = widthProp && imageWidthProp && imageWidthProp > 0 ? widthProp / imageWidthProp : 1;\n    if (responsive && parentWidth) {\n      return coords.map(function (coord) {\n        return coord / (imgRef.naturalWidth / parentWidth);\n      });\n    }\n    return coords.map(function (coord) {\n      return coord * scale;\n    });\n  };\n  var renderPrefilledAreas = function (mapObj) {\n    if (mapObj === void 0) {\n      mapObj = map;\n    }\n    mapObj.areas.map(function (area) {\n      if (!area.preFillColor) return false;\n      (0, draw_1.default)(area.shape, scaleCoords(area.coords), area.preFillColor, area.lineWidth || lineWidthProp, area.strokeColor || strokeColorProp, true, ctx);\n      return true;\n    });\n  };\n  var computeCenter = function (area) {\n    if (!area) return [0, 0];\n    var scaledCoords = scaleCoords(area.coords);\n    switch (area.shape) {\n      case 'circle':\n        return [scaledCoords[0], scaledCoords[1]];\n      case 'poly':\n      case 'rect':\n      default:\n        {\n          var n_1 = scaledCoords.length / 2;\n          var _a = scaledCoords.reduce(function (_a, val, idx) {\n              var y = _a.y,\n                x = _a.x;\n              return !(idx % 2) ? {\n                y: y,\n                x: x + val / n_1\n              } : {\n                y: y + val / n_1,\n                x: x\n              };\n            }, {\n              y: 0,\n              x: 0\n            }),\n            scaleY = _a.y,\n            scaleX = _a.x;\n          return [scaleX, scaleY];\n        }\n    }\n  };\n  var updateCanvas = function () {\n    ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n    renderPrefilledAreas(mapProp);\n  };\n  var renderAreas = function () {\n    return map.areas.map(function (area, index) {\n      var scaledCoords = scaleCoords(area.coords);\n      var center = computeCenter(area);\n      var extendedArea = __assign(__assign({}, area), {\n        scaledCoords: scaledCoords,\n        center: center\n      });\n      if (area.disabled) return null;\n      return react_1.default.createElement(\"area\", {\n        key: area[areaKeyName] || index.toString(),\n        shape: area.shape,\n        coords: scaledCoords.join(','),\n        onMouseEnter: function (event) {\n          return hoverOn(extendedArea, index, event);\n        },\n        onMouseLeave: function (event) {\n          return hoverOff(extendedArea, index, event);\n        },\n        onMouseMove: function (event) {\n          return (0, events_1.mouseMove)(extendedArea, index, event, props);\n        },\n        onMouseDown: function (event) {\n          return (0, events_1.mouseDown)(extendedArea, index, event, props);\n        },\n        onMouseUp: function (event) {\n          return (0, events_1.mouseUp)(extendedArea, index, event, props);\n        },\n        onTouchStart: function (event) {\n          return (0, events_1.touchStart)(extendedArea, index, event, props);\n        },\n        onTouchEnd: function (event) {\n          return (0, events_1.touchEnd)(extendedArea, index, event, props);\n        },\n        onClick: function (event) {\n          return click(extendedArea, index, event);\n        },\n        href: area.href,\n        alt: \"map\"\n      });\n    });\n  };\n  return react_1.default.createElement(\"div\", {\n    id: \"img-mapper\",\n    style: (0, styles_1.default)(props).container,\n    ref: container\n  }, react_1.default.createElement(\"img\", {\n    role: \"presentation\",\n    className: \"img-mapper-img\",\n    style: __assign(__assign({}, (0, styles_1.default)(props).img), !imgRef ? {\n      display: 'none'\n    } : {}),\n    src: srcProp,\n    useMap: \"#\".concat(map.name),\n    alt: \"map\",\n    ref: img,\n    onClick: function (event) {\n      return (0, events_1.imageClick)(event, props);\n    },\n    onMouseMove: function (event) {\n      return (0, events_1.imageMouseMove)(event, props);\n    }\n  }), react_1.default.createElement(\"canvas\", {\n    className: \"img-mapper-canvas\",\n    ref: canvas,\n    style: (0, styles_1.default)().canvas\n  }), react_1.default.createElement(\"map\", {\n    className: \"img-mapper-map\",\n    name: map.name,\n    style: (0, styles_1.default)().map\n  }, isRendered && !disabled && imgRef && renderAreas()));\n};\nImageMapper.defaultProps = constants_1.ImageMapperDefaultProps;\nexports.default = react_1.default.memo(ImageMapper, function (prevProps, nextProps) {\n  var watchedProps = __spreadArray(__spreadArray([], constants_1.rerenderPropsList, true), nextProps.rerenderProps, true);\n  var propChanged = watchedProps.some(function (prop) {\n    return prevProps[prop] !== nextProps[prop];\n  });\n  return (0, react_fast_compare_1.default)(prevProps.map, nextProps.map) && !propChanged;\n});","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__exportStar","exports","__spreadArray","to","from","pack","l","ar","Array","slice","concat","__importDefault","react_1","require","react_fast_compare_1","styles_1","constants_1","draw_1","events_1","ImageMapper","props","containerRef","active","disabled","fillColorProp","fillColor","lineWidthProp","lineWidth","mapProp","map","srcProp","src","strokeColorProp","strokeColor","natural","heightProp","height","widthProp","width","imageWidthProp","imgWidth","areaKeyName","stayHighlighted","stayMultiHighlighted","toggleHighlighted","parentWidth","responsive","onLoad","onMouseEnter","onMouseLeave","onClick","_a","useState","setMap","_b","storedMap","setStoredMap","_c","isRendered","setRendered","_d","imgRef","setImgRef","container","useRef","img","canvas","ctx","isInitialMount","useEffect","initCanvas","current","getContext","updateCacheMap","updateCanvas","clearHighlightedArea","getDimensions","type","dimension","getValues","measure","name","naturalWidth","naturalHeight","clientWidth","clientHeight","firstLoad","imgHeight","imageWidth","imageHeight","style","fillStyle","renderPrefilledAreas","hoverOn","area","index","event","shape","scaledCoords","isAreaActive","default","hoverOff","clearRect","click","newArea_1","chosenArea","preFillColor","updatedAreas_1","areas","cur","prev","preventDefault","scaleCoords","coords","scale","coord","mapObj","computeCenter","n_1","reduce","val","idx","y","x","scaleY","scaleX","renderAreas","center","extendedArea","createElement","key","toString","join","onMouseMove","mouseMove","onMouseDown","mouseDown","onMouseUp","mouseUp","onTouchStart","touchStart","onTouchEnd","touchEnd","href","alt","id","ref","role","className","display","useMap","imageClick","imageMouseMove","defaultProps","ImageMapperDefaultProps","memo","prevProps","nextProps","watchedProps","rerenderPropsList","rerenderProps","propChanged","some","prop"],"sources":["C:/Users/mason/OneDrive/Documents/GitHub/shds-site/site/node_modules/react-img-mapper/dist/ImageMapper.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar react_fast_compare_1 = __importDefault(require(\"react-fast-compare\"));\nvar styles_1 = __importDefault(require(\"./styles\"));\nvar constants_1 = require(\"./constants\");\nvar draw_1 = __importDefault(require(\"./draw\"));\nvar events_1 = require(\"./events\");\n__exportStar(require(\"./types\"), exports);\nvar ImageMapper = function (props) {\n    var containerRef = props.containerRef, active = props.active, disabled = props.disabled, fillColorProp = props.fillColor, lineWidthProp = props.lineWidth, mapProp = props.map, srcProp = props.src, strokeColorProp = props.strokeColor, natural = props.natural, heightProp = props.height, widthProp = props.width, imageWidthProp = props.imgWidth, areaKeyName = props.areaKeyName, stayHighlighted = props.stayHighlighted, stayMultiHighlighted = props.stayMultiHighlighted, toggleHighlighted = props.toggleHighlighted, parentWidth = props.parentWidth, responsive = props.responsive, onLoad = props.onLoad, onMouseEnter = props.onMouseEnter, onMouseLeave = props.onMouseLeave, onClick = props.onClick;\n    var _a = (0, react_1.useState)(mapProp), map = _a[0], setMap = _a[1];\n    var _b = (0, react_1.useState)(map), storedMap = _b[0], setStoredMap = _b[1];\n    var _c = (0, react_1.useState)(false), isRendered = _c[0], setRendered = _c[1];\n    var _d = (0, react_1.useState)(null), imgRef = _d[0], setImgRef = _d[1];\n    var container = (0, react_1.useRef)(null);\n    var img = (0, react_1.useRef)(null);\n    var canvas = (0, react_1.useRef)(null);\n    var ctx = (0, react_1.useRef)(null);\n    var isInitialMount = (0, react_1.useRef)(true);\n    (0, react_1.useEffect)(function () {\n        initCanvas(true);\n        ctx.current = canvas.current.getContext('2d');\n        updateCacheMap();\n        setRendered(true);\n    }, []);\n    (0, react_1.useEffect)(function () {\n        if (isInitialMount.current) {\n            isInitialMount.current = false;\n        }\n        else {\n            updateCacheMap();\n            initCanvas();\n            if (imgRef)\n                updateCanvas();\n        }\n    }, [props, isInitialMount, imgRef]);\n    (0, react_1.useEffect)(function () {\n        container.current.clearHighlightedArea = function () {\n            setMap(storedMap);\n            initCanvas();\n        };\n        if (containerRef) {\n            containerRef.current = container.current;\n        }\n    }, [imgRef]);\n    (0, react_1.useEffect)(function () {\n        if (responsive)\n            initCanvas();\n    }, [parentWidth]);\n    var updateCacheMap = function () {\n        setMap(mapProp);\n        setStoredMap(mapProp);\n    };\n    var getDimensions = function (type) {\n        var _a = props, _b = type, dimension = _a[_b];\n        if (typeof dimension === 'function') {\n            // @ts-ignore\n            return dimension(img.current);\n        }\n        return dimension;\n    };\n    var getValues = function (type, measure, name) {\n        if (name === void 0) { name = 'area'; }\n        var _a = img.current, naturalWidth = _a.naturalWidth, naturalHeight = _a.naturalHeight, clientWidth = _a.clientWidth, clientHeight = _a.clientHeight;\n        if (type === 'width') {\n            if (responsive)\n                return parentWidth;\n            if (natural)\n                return naturalWidth;\n            if (widthProp || name === 'image')\n                return measure;\n            return clientWidth;\n        }\n        if (type === 'height') {\n            if (responsive)\n                return clientHeight;\n            if (natural)\n                return naturalHeight;\n            if (heightProp || name === 'image')\n                return measure;\n            return clientHeight;\n        }\n        return 0;\n    };\n    var initCanvas = function (firstLoad) {\n        if (firstLoad === void 0) { firstLoad = false; }\n        if (!firstLoad && !imgRef)\n            return;\n        var imgWidth = getDimensions('width');\n        var imgHeight = getDimensions('height');\n        var imageWidth = getValues('width', imgWidth);\n        var imageHeight = getValues('height', imgHeight);\n        if (widthProp || responsive) {\n            img.current.width = getValues('width', imgWidth, 'image');\n        }\n        if (heightProp || responsive) {\n            img.current.height = getValues('height', imgHeight, 'image');\n        }\n        canvas.current.width = imageWidth;\n        canvas.current.height = imageHeight;\n        container.current.style.width = \"\".concat(imageWidth, \"px\");\n        container.current.style.height = \"\".concat(imageHeight, \"px\");\n        ctx.current = canvas.current.getContext('2d');\n        ctx.current.fillStyle = fillColorProp;\n        if (onLoad && imgRef) {\n            onLoad(img.current, {\n                width: imageWidth,\n                height: imageHeight,\n            });\n        }\n        setImgRef(img.current);\n        if (imgRef)\n            renderPrefilledAreas();\n    };\n    var hoverOn = function (area, index, event) {\n        var shape = area.shape, scaledCoords = area.scaledCoords, fillColor = area.fillColor, lineWidth = area.lineWidth, strokeColor = area.strokeColor, isAreaActive = area.active;\n        if (active) {\n            (0, draw_1.default)(shape, scaledCoords, fillColor || fillColorProp, lineWidth || lineWidthProp, strokeColor || strokeColorProp, isAreaActive !== null && isAreaActive !== void 0 ? isAreaActive : true, ctx);\n        }\n        if (onMouseEnter)\n            onMouseEnter(area, index, event);\n    };\n    var hoverOff = function (area, index, event) {\n        if (active) {\n            ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n            renderPrefilledAreas();\n        }\n        if (onMouseLeave)\n            onMouseLeave(area, index, event);\n    };\n    var click = function (area, index, event) {\n        var _a;\n        var isAreaActive = (_a = area.active) !== null && _a !== void 0 ? _a : true;\n        if (isAreaActive && (stayHighlighted || stayMultiHighlighted || toggleHighlighted)) {\n            var newArea_1 = __assign({}, area);\n            var chosenArea = stayMultiHighlighted ? map : storedMap;\n            if (toggleHighlighted && newArea_1.preFillColor) {\n                delete newArea_1.preFillColor;\n            }\n            else if (stayHighlighted || stayMultiHighlighted) {\n                newArea_1.preFillColor = area.fillColor || fillColorProp;\n            }\n            var updatedAreas_1 = chosenArea.areas.map(function (cur) {\n                return cur[areaKeyName] === area[areaKeyName] ? newArea_1 : cur;\n            });\n            setMap(function (prev) { return (__assign(__assign({}, prev), { areas: updatedAreas_1 })); });\n        }\n        if (onClick) {\n            event.preventDefault();\n            onClick(area, index, event);\n        }\n    };\n    var scaleCoords = function (coords) {\n        var scale = widthProp && imageWidthProp && imageWidthProp > 0\n            ? widthProp / imageWidthProp\n            : 1;\n        if (responsive && parentWidth) {\n            return coords.map(function (coord) { return coord / (imgRef.naturalWidth / parentWidth); });\n        }\n        return coords.map(function (coord) { return coord * scale; });\n    };\n    var renderPrefilledAreas = function (mapObj) {\n        if (mapObj === void 0) { mapObj = map; }\n        mapObj.areas.map(function (area) {\n            if (!area.preFillColor)\n                return false;\n            (0, draw_1.default)(area.shape, scaleCoords(area.coords), area.preFillColor, area.lineWidth || lineWidthProp, area.strokeColor || strokeColorProp, true, ctx);\n            return true;\n        });\n    };\n    var computeCenter = function (area) {\n        if (!area)\n            return [0, 0];\n        var scaledCoords = scaleCoords(area.coords);\n        switch (area.shape) {\n            case 'circle':\n                return [scaledCoords[0], scaledCoords[1]];\n            case 'poly':\n            case 'rect':\n            default: {\n                var n_1 = scaledCoords.length / 2;\n                var _a = scaledCoords.reduce(function (_a, val, idx) {\n                    var y = _a.y, x = _a.x;\n                    return (!(idx % 2) ? { y: y, x: x + val / n_1 } : { y: y + val / n_1, x: x });\n                }, { y: 0, x: 0 }), scaleY = _a.y, scaleX = _a.x;\n                return [scaleX, scaleY];\n            }\n        }\n    };\n    var updateCanvas = function () {\n        ctx.current.clearRect(0, 0, canvas.current.width, canvas.current.height);\n        renderPrefilledAreas(mapProp);\n    };\n    var renderAreas = function () {\n        return map.areas.map(function (area, index) {\n            var scaledCoords = scaleCoords(area.coords);\n            var center = computeCenter(area);\n            var extendedArea = __assign(__assign({}, area), { scaledCoords: scaledCoords, center: center });\n            if (area.disabled)\n                return null;\n            return (react_1.default.createElement(\"area\", { key: area[areaKeyName] || index.toString(), shape: area.shape, coords: scaledCoords.join(','), onMouseEnter: function (event) { return hoverOn(extendedArea, index, event); }, onMouseLeave: function (event) { return hoverOff(extendedArea, index, event); }, onMouseMove: function (event) { return (0, events_1.mouseMove)(extendedArea, index, event, props); }, onMouseDown: function (event) { return (0, events_1.mouseDown)(extendedArea, index, event, props); }, onMouseUp: function (event) { return (0, events_1.mouseUp)(extendedArea, index, event, props); }, onTouchStart: function (event) { return (0, events_1.touchStart)(extendedArea, index, event, props); }, onTouchEnd: function (event) { return (0, events_1.touchEnd)(extendedArea, index, event, props); }, onClick: function (event) { return click(extendedArea, index, event); }, href: area.href, alt: \"map\" }));\n        });\n    };\n    return (react_1.default.createElement(\"div\", { id: \"img-mapper\", style: (0, styles_1.default)(props).container, ref: container },\n        react_1.default.createElement(\"img\", { role: \"presentation\", className: \"img-mapper-img\", style: __assign(__assign({}, (0, styles_1.default)(props).img), (!imgRef ? { display: 'none' } : {})), src: srcProp, useMap: \"#\".concat(map.name), alt: \"map\", ref: img, onClick: function (event) { return (0, events_1.imageClick)(event, props); }, onMouseMove: function (event) { return (0, events_1.imageMouseMove)(event, props); } }),\n        react_1.default.createElement(\"canvas\", { className: \"img-mapper-canvas\", ref: canvas, style: (0, styles_1.default)().canvas }),\n        react_1.default.createElement(\"map\", { className: \"img-mapper-map\", name: map.name, style: (0, styles_1.default)().map }, isRendered && !disabled && imgRef && renderAreas())));\n};\nImageMapper.defaultProps = constants_1.ImageMapperDefaultProps;\nexports.default = react_1.default.memo(ImageMapper, function (prevProps, nextProps) {\n    var watchedProps = __spreadArray(__spreadArray([], constants_1.rerenderPropsList, true), nextProps.rerenderProps, true);\n    var propChanged = watchedProps.some(function (prop) { return prevProps[prop] !== nextProps[prop]; });\n    return (0, react_fast_compare_1.default)(prevProps.map, nextProps.map) && !propChanged;\n});\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,QAAQ,GAAI,IAAI,IAAI,IAAI,CAACA,QAAQ,IAAK,YAAY;EAClDA,QAAQ,GAAGC,MAAM,CAACC,MAAM,IAAI,UAASC,CAAC,EAAE;IACpC,KAAK,IAAIC,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MACjDD,CAAC,GAAGG,SAAS,CAACF,CAAC,CAAC;MAChB,KAAK,IAAII,CAAC,IAAIL,CAAC,EAAE,IAAIH,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAC3DN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IACnB;IACA,OAAON,CAAC;EACZ,CAAC;EACD,OAAOH,QAAQ,CAACa,KAAK,CAAC,IAAI,EAAEN,SAAS,CAAC;AAC1C,CAAC;AACD,IAAIO,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,KAAMb,MAAM,CAACc,MAAM,GAAI,UAASC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EAC5F,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5BjB,MAAM,CAACoB,cAAc,CAACL,CAAC,EAAEG,EAAE,EAAE;IAAEG,UAAU,EAAE,IAAI;IAAEC,GAAG,EAAE,YAAW;MAAE,OAAON,CAAC,CAACC,CAAC,CAAC;IAAE;EAAE,CAAC,CAAC;AACxF,CAAC,GAAK,UAASF,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EACxB,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5BF,CAAC,CAACG,EAAE,CAAC,GAAGF,CAAC,CAACC,CAAC,CAAC;AAChB,CAAE,CAAC;AACH,IAAIM,kBAAkB,GAAI,IAAI,IAAI,IAAI,CAACA,kBAAkB,KAAMvB,MAAM,CAACc,MAAM,GAAI,UAASC,CAAC,EAAES,CAAC,EAAE;EAC3FxB,MAAM,CAACoB,cAAc,CAACL,CAAC,EAAE,SAAS,EAAE;IAAEM,UAAU,EAAE,IAAI;IAAEI,KAAK,EAAED;EAAE,CAAC,CAAC;AACvE,CAAC,GAAI,UAAST,CAAC,EAAES,CAAC,EAAE;EAChBT,CAAC,CAAC,SAAS,CAAC,GAAGS,CAAC;AACpB,CAAC,CAAC;AACF,IAAIE,YAAY,GAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAK,UAAUC,GAAG,EAAE;EAC7D,IAAIA,GAAG,IAAIA,GAAG,CAACC,UAAU,EAAE,OAAOD,GAAG;EACrC,IAAIE,MAAM,GAAG,CAAC,CAAC;EACf,IAAIF,GAAG,IAAI,IAAI,EAAE,KAAK,IAAIV,CAAC,IAAIU,GAAG,EAAE,IAAIV,CAAC,KAAK,SAAS,IAAIjB,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACgB,GAAG,EAAEV,CAAC,CAAC,EAAEJ,eAAe,CAACgB,MAAM,EAAEF,GAAG,EAAEV,CAAC,CAAC;EACxIM,kBAAkB,CAACM,MAAM,EAAEF,GAAG,CAAC;EAC/B,OAAOE,MAAM;AACjB,CAAC;AACD,IAAIC,YAAY,GAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAK,UAASd,CAAC,EAAEe,OAAO,EAAE;EACnE,KAAK,IAAIvB,CAAC,IAAIQ,CAAC,EAAE,IAAIR,CAAC,KAAK,SAAS,IAAI,CAACR,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACoB,OAAO,EAAEvB,CAAC,CAAC,EAAEK,eAAe,CAACkB,OAAO,EAAEf,CAAC,EAAER,CAAC,CAAC;AAC7H,CAAC;AACD,IAAIwB,aAAa,GAAI,IAAI,IAAI,IAAI,CAACA,aAAa,IAAK,UAAUC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;EAC1E,IAAIA,IAAI,IAAI7B,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEgC,CAAC,GAAGF,IAAI,CAAC3B,MAAM,EAAE8B,EAAE,EAAEjC,CAAC,GAAGgC,CAAC,EAAEhC,CAAC,EAAE,EAAE;IACjF,IAAIiC,EAAE,IAAI,EAAEjC,CAAC,IAAI8B,IAAI,CAAC,EAAE;MACpB,IAAI,CAACG,EAAE,EAAEA,EAAE,GAAGC,KAAK,CAAC7B,SAAS,CAAC8B,KAAK,CAAC5B,IAAI,CAACuB,IAAI,EAAE,CAAC,EAAE9B,CAAC,CAAC;MACpDiC,EAAE,CAACjC,CAAC,CAAC,GAAG8B,IAAI,CAAC9B,CAAC,CAAC;IACnB;EACJ;EACA,OAAO6B,EAAE,CAACO,MAAM,CAACH,EAAE,IAAIC,KAAK,CAAC7B,SAAS,CAAC8B,KAAK,CAAC5B,IAAI,CAACuB,IAAI,CAAC,CAAC;AAC5D,CAAC;AACD,IAAIO,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUd,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACD3B,MAAM,CAACoB,cAAc,CAACW,OAAO,EAAE,YAAY,EAAE;EAAEN,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,IAAIiB,OAAO,GAAGhB,YAAY,CAACiB,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5C,IAAIC,oBAAoB,GAAGH,eAAe,CAACE,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACzE,IAAIE,QAAQ,GAAGJ,eAAe,CAACE,OAAO,CAAC,UAAU,CAAC,CAAC;AACnD,IAAIG,WAAW,GAAGH,OAAO,CAAC,aAAa,CAAC;AACxC,IAAII,MAAM,GAAGN,eAAe,CAACE,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/C,IAAIK,QAAQ,GAAGL,OAAO,CAAC,UAAU,CAAC;AAClCb,YAAY,CAACa,OAAO,CAAC,SAAS,CAAC,EAAEZ,OAAO,CAAC;AACzC,IAAIkB,WAAW,GAAG,UAAUC,KAAK,EAAE;EAC/B,IAAIC,YAAY,GAAGD,KAAK,CAACC,YAAY;IAAEC,MAAM,GAAGF,KAAK,CAACE,MAAM;IAAEC,QAAQ,GAAGH,KAAK,CAACG,QAAQ;IAAEC,aAAa,GAAGJ,KAAK,CAACK,SAAS;IAAEC,aAAa,GAAGN,KAAK,CAACO,SAAS;IAAEC,OAAO,GAAGR,KAAK,CAACS,GAAG;IAAEC,OAAO,GAAGV,KAAK,CAACW,GAAG;IAAEC,eAAe,GAAGZ,KAAK,CAACa,WAAW;IAAEC,OAAO,GAAGd,KAAK,CAACc,OAAO;IAAEC,UAAU,GAAGf,KAAK,CAACgB,MAAM;IAAEC,SAAS,GAAGjB,KAAK,CAACkB,KAAK;IAAEC,cAAc,GAAGnB,KAAK,CAACoB,QAAQ;IAAEC,WAAW,GAAGrB,KAAK,CAACqB,WAAW;IAAEC,eAAe,GAAGtB,KAAK,CAACsB,eAAe;IAAEC,oBAAoB,GAAGvB,KAAK,CAACuB,oBAAoB;IAAEC,iBAAiB,GAAGxB,KAAK,CAACwB,iBAAiB;IAAEC,WAAW,GAAGzB,KAAK,CAACyB,WAAW;IAAEC,UAAU,GAAG1B,KAAK,CAAC0B,UAAU;IAAEC,MAAM,GAAG3B,KAAK,CAAC2B,MAAM;IAAEC,YAAY,GAAG5B,KAAK,CAAC4B,YAAY;IAAEC,YAAY,GAAG7B,KAAK,CAAC6B,YAAY;IAAEC,OAAO,GAAG9B,KAAK,CAAC8B,OAAO;EACtrB,IAAIC,EAAE,GAAG,CAAC,CAAC,EAAEvC,OAAO,CAACwC,QAAQ,EAAExB,OAAO,CAAC;IAAEC,GAAG,GAAGsB,EAAE,CAAC,CAAC,CAAC;IAAEE,MAAM,GAAGF,EAAE,CAAC,CAAC,CAAC;EACpE,IAAIG,EAAE,GAAG,CAAC,CAAC,EAAE1C,OAAO,CAACwC,QAAQ,EAAEvB,GAAG,CAAC;IAAE0B,SAAS,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEE,YAAY,GAAGF,EAAE,CAAC,CAAC,CAAC;EAC5E,IAAIG,EAAE,GAAG,CAAC,CAAC,EAAE7C,OAAO,CAACwC,QAAQ,EAAE,KAAK,CAAC;IAAEM,UAAU,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEE,WAAW,GAAGF,EAAE,CAAC,CAAC,CAAC;EAC9E,IAAIG,EAAE,GAAG,CAAC,CAAC,EAAEhD,OAAO,CAACwC,QAAQ,EAAE,IAAI,CAAC;IAAES,MAAM,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEE,SAAS,GAAGF,EAAE,CAAC,CAAC,CAAC;EACvE,IAAIG,SAAS,GAAG,CAAC,CAAC,EAAEnD,OAAO,CAACoD,MAAM,EAAE,IAAI,CAAC;EACzC,IAAIC,GAAG,GAAG,CAAC,CAAC,EAAErD,OAAO,CAACoD,MAAM,EAAE,IAAI,CAAC;EACnC,IAAIE,MAAM,GAAG,CAAC,CAAC,EAAEtD,OAAO,CAACoD,MAAM,EAAE,IAAI,CAAC;EACtC,IAAIG,GAAG,GAAG,CAAC,CAAC,EAAEvD,OAAO,CAACoD,MAAM,EAAE,IAAI,CAAC;EACnC,IAAII,cAAc,GAAG,CAAC,CAAC,EAAExD,OAAO,CAACoD,MAAM,EAAE,IAAI,CAAC;EAC9C,CAAC,CAAC,EAAEpD,OAAO,CAACyD,SAAS,EAAE,YAAY;IAC/BC,UAAU,CAAC,IAAI,CAAC;IAChBH,GAAG,CAACI,OAAO,GAAGL,MAAM,CAACK,OAAO,CAACC,UAAU,CAAC,IAAI,CAAC;IAC7CC,cAAc,EAAE;IAChBd,WAAW,CAAC,IAAI,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EACN,CAAC,CAAC,EAAE/C,OAAO,CAACyD,SAAS,EAAE,YAAY;IAC/B,IAAID,cAAc,CAACG,OAAO,EAAE;MACxBH,cAAc,CAACG,OAAO,GAAG,KAAK;IAClC,CAAC,MACI;MACDE,cAAc,EAAE;MAChBH,UAAU,EAAE;MACZ,IAAIT,MAAM,EACNa,YAAY,EAAE;IACtB;EACJ,CAAC,EAAE,CAACtD,KAAK,EAAEgD,cAAc,EAAEP,MAAM,CAAC,CAAC;EACnC,CAAC,CAAC,EAAEjD,OAAO,CAACyD,SAAS,EAAE,YAAY;IAC/BN,SAAS,CAACQ,OAAO,CAACI,oBAAoB,GAAG,YAAY;MACjDtB,MAAM,CAACE,SAAS,CAAC;MACjBe,UAAU,EAAE;IAChB,CAAC;IACD,IAAIjD,YAAY,EAAE;MACdA,YAAY,CAACkD,OAAO,GAAGR,SAAS,CAACQ,OAAO;IAC5C;EACJ,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;EACZ,CAAC,CAAC,EAAEjD,OAAO,CAACyD,SAAS,EAAE,YAAY;IAC/B,IAAIvB,UAAU,EACVwB,UAAU,EAAE;EACpB,CAAC,EAAE,CAACzB,WAAW,CAAC,CAAC;EACjB,IAAI4B,cAAc,GAAG,YAAY;IAC7BpB,MAAM,CAACzB,OAAO,CAAC;IACf4B,YAAY,CAAC5B,OAAO,CAAC;EACzB,CAAC;EACD,IAAIgD,aAAa,GAAG,UAAUC,IAAI,EAAE;IAChC,IAAI1B,EAAE,GAAG/B,KAAK;MAAEkC,EAAE,GAAGuB,IAAI;MAAEC,SAAS,GAAG3B,EAAE,CAACG,EAAE,CAAC;IAC7C,IAAI,OAAOwB,SAAS,KAAK,UAAU,EAAE;MACjC;MACA,OAAOA,SAAS,CAACb,GAAG,CAACM,OAAO,CAAC;IACjC;IACA,OAAOO,SAAS;EACpB,CAAC;EACD,IAAIC,SAAS,GAAG,UAAUF,IAAI,EAAEG,OAAO,EAAEC,IAAI,EAAE;IAC3C,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;MAAEA,IAAI,GAAG,MAAM;IAAE;IACtC,IAAI9B,EAAE,GAAGc,GAAG,CAACM,OAAO;MAAEW,YAAY,GAAG/B,EAAE,CAAC+B,YAAY;MAAEC,aAAa,GAAGhC,EAAE,CAACgC,aAAa;MAAEC,WAAW,GAAGjC,EAAE,CAACiC,WAAW;MAAEC,YAAY,GAAGlC,EAAE,CAACkC,YAAY;IACpJ,IAAIR,IAAI,KAAK,OAAO,EAAE;MAClB,IAAI/B,UAAU,EACV,OAAOD,WAAW;MACtB,IAAIX,OAAO,EACP,OAAOgD,YAAY;MACvB,IAAI7C,SAAS,IAAI4C,IAAI,KAAK,OAAO,EAC7B,OAAOD,OAAO;MAClB,OAAOI,WAAW;IACtB;IACA,IAAIP,IAAI,KAAK,QAAQ,EAAE;MACnB,IAAI/B,UAAU,EACV,OAAOuC,YAAY;MACvB,IAAInD,OAAO,EACP,OAAOiD,aAAa;MACxB,IAAIhD,UAAU,IAAI8C,IAAI,KAAK,OAAO,EAC9B,OAAOD,OAAO;MAClB,OAAOK,YAAY;IACvB;IACA,OAAO,CAAC;EACZ,CAAC;EACD,IAAIf,UAAU,GAAG,UAAUgB,SAAS,EAAE;IAClC,IAAIA,SAAS,KAAK,KAAK,CAAC,EAAE;MAAEA,SAAS,GAAG,KAAK;IAAE;IAC/C,IAAI,CAACA,SAAS,IAAI,CAACzB,MAAM,EACrB;IACJ,IAAIrB,QAAQ,GAAGoC,aAAa,CAAC,OAAO,CAAC;IACrC,IAAIW,SAAS,GAAGX,aAAa,CAAC,QAAQ,CAAC;IACvC,IAAIY,UAAU,GAAGT,SAAS,CAAC,OAAO,EAAEvC,QAAQ,CAAC;IAC7C,IAAIiD,WAAW,GAAGV,SAAS,CAAC,QAAQ,EAAEQ,SAAS,CAAC;IAChD,IAAIlD,SAAS,IAAIS,UAAU,EAAE;MACzBmB,GAAG,CAACM,OAAO,CAACjC,KAAK,GAAGyC,SAAS,CAAC,OAAO,EAAEvC,QAAQ,EAAE,OAAO,CAAC;IAC7D;IACA,IAAIL,UAAU,IAAIW,UAAU,EAAE;MAC1BmB,GAAG,CAACM,OAAO,CAACnC,MAAM,GAAG2C,SAAS,CAAC,QAAQ,EAAEQ,SAAS,EAAE,OAAO,CAAC;IAChE;IACArB,MAAM,CAACK,OAAO,CAACjC,KAAK,GAAGkD,UAAU;IACjCtB,MAAM,CAACK,OAAO,CAACnC,MAAM,GAAGqD,WAAW;IACnC1B,SAAS,CAACQ,OAAO,CAACmB,KAAK,CAACpD,KAAK,GAAG,EAAE,CAAC5B,MAAM,CAAC8E,UAAU,EAAE,IAAI,CAAC;IAC3DzB,SAAS,CAACQ,OAAO,CAACmB,KAAK,CAACtD,MAAM,GAAG,EAAE,CAAC1B,MAAM,CAAC+E,WAAW,EAAE,IAAI,CAAC;IAC7DtB,GAAG,CAACI,OAAO,GAAGL,MAAM,CAACK,OAAO,CAACC,UAAU,CAAC,IAAI,CAAC;IAC7CL,GAAG,CAACI,OAAO,CAACoB,SAAS,GAAGnE,aAAa;IACrC,IAAIuB,MAAM,IAAIc,MAAM,EAAE;MAClBd,MAAM,CAACkB,GAAG,CAACM,OAAO,EAAE;QAChBjC,KAAK,EAAEkD,UAAU;QACjBpD,MAAM,EAAEqD;MACZ,CAAC,CAAC;IACN;IACA3B,SAAS,CAACG,GAAG,CAACM,OAAO,CAAC;IACtB,IAAIV,MAAM,EACN+B,oBAAoB,EAAE;EAC9B,CAAC;EACD,IAAIC,OAAO,GAAG,UAAUC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE;IACxC,IAAIC,KAAK,GAAGH,IAAI,CAACG,KAAK;MAAEC,YAAY,GAAGJ,IAAI,CAACI,YAAY;MAAEzE,SAAS,GAAGqE,IAAI,CAACrE,SAAS;MAAEE,SAAS,GAAGmE,IAAI,CAACnE,SAAS;MAAEM,WAAW,GAAG6D,IAAI,CAAC7D,WAAW;MAAEkE,YAAY,GAAGL,IAAI,CAACxE,MAAM;IAC5K,IAAIA,MAAM,EAAE;MACR,CAAC,CAAC,EAAEL,MAAM,CAACmF,OAAO,EAAEH,KAAK,EAAEC,YAAY,EAAEzE,SAAS,IAAID,aAAa,EAAEG,SAAS,IAAID,aAAa,EAAEO,WAAW,IAAID,eAAe,EAAEmE,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAGA,YAAY,GAAG,IAAI,EAAEhC,GAAG,CAAC;IACjN;IACA,IAAInB,YAAY,EACZA,YAAY,CAAC8C,IAAI,EAAEC,KAAK,EAAEC,KAAK,CAAC;EACxC,CAAC;EACD,IAAIK,QAAQ,GAAG,UAAUP,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE;IACzC,IAAI1E,MAAM,EAAE;MACR6C,GAAG,CAACI,OAAO,CAAC+B,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEpC,MAAM,CAACK,OAAO,CAACjC,KAAK,EAAE4B,MAAM,CAACK,OAAO,CAACnC,MAAM,CAAC;MACxEwD,oBAAoB,EAAE;IAC1B;IACA,IAAI3C,YAAY,EACZA,YAAY,CAAC6C,IAAI,EAAEC,KAAK,EAAEC,KAAK,CAAC;EACxC,CAAC;EACD,IAAIO,KAAK,GAAG,UAAUT,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE;IACtC,IAAI7C,EAAE;IACN,IAAIgD,YAAY,GAAG,CAAChD,EAAE,GAAG2C,IAAI,CAACxE,MAAM,MAAM,IAAI,IAAI6B,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,IAAI;IAC3E,IAAIgD,YAAY,KAAKzD,eAAe,IAAIC,oBAAoB,IAAIC,iBAAiB,CAAC,EAAE;MAChF,IAAI4D,SAAS,GAAGvI,QAAQ,CAAC,CAAC,CAAC,EAAE6H,IAAI,CAAC;MAClC,IAAIW,UAAU,GAAG9D,oBAAoB,GAAGd,GAAG,GAAG0B,SAAS;MACvD,IAAIX,iBAAiB,IAAI4D,SAAS,CAACE,YAAY,EAAE;QAC7C,OAAOF,SAAS,CAACE,YAAY;MACjC,CAAC,MACI,IAAIhE,eAAe,IAAIC,oBAAoB,EAAE;QAC9C6D,SAAS,CAACE,YAAY,GAAGZ,IAAI,CAACrE,SAAS,IAAID,aAAa;MAC5D;MACA,IAAImF,cAAc,GAAGF,UAAU,CAACG,KAAK,CAAC/E,GAAG,CAAC,UAAUgF,GAAG,EAAE;QACrD,OAAOA,GAAG,CAACpE,WAAW,CAAC,KAAKqD,IAAI,CAACrD,WAAW,CAAC,GAAG+D,SAAS,GAAGK,GAAG;MACnE,CAAC,CAAC;MACFxD,MAAM,CAAC,UAAUyD,IAAI,EAAE;QAAE,OAAQ7I,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE6I,IAAI,CAAC,EAAE;UAAEF,KAAK,EAAED;QAAe,CAAC,CAAC;MAAG,CAAC,CAAC;IACjG;IACA,IAAIzD,OAAO,EAAE;MACT8C,KAAK,CAACe,cAAc,EAAE;MACtB7D,OAAO,CAAC4C,IAAI,EAAEC,KAAK,EAAEC,KAAK,CAAC;IAC/B;EACJ,CAAC;EACD,IAAIgB,WAAW,GAAG,UAAUC,MAAM,EAAE;IAChC,IAAIC,KAAK,GAAG7E,SAAS,IAAIE,cAAc,IAAIA,cAAc,GAAG,CAAC,GACvDF,SAAS,GAAGE,cAAc,GAC1B,CAAC;IACP,IAAIO,UAAU,IAAID,WAAW,EAAE;MAC3B,OAAOoE,MAAM,CAACpF,GAAG,CAAC,UAAUsF,KAAK,EAAE;QAAE,OAAOA,KAAK,IAAItD,MAAM,CAACqB,YAAY,GAAGrC,WAAW,CAAC;MAAE,CAAC,CAAC;IAC/F;IACA,OAAOoE,MAAM,CAACpF,GAAG,CAAC,UAAUsF,KAAK,EAAE;MAAE,OAAOA,KAAK,GAAGD,KAAK;IAAE,CAAC,CAAC;EACjE,CAAC;EACD,IAAItB,oBAAoB,GAAG,UAAUwB,MAAM,EAAE;IACzC,IAAIA,MAAM,KAAK,KAAK,CAAC,EAAE;MAAEA,MAAM,GAAGvF,GAAG;IAAE;IACvCuF,MAAM,CAACR,KAAK,CAAC/E,GAAG,CAAC,UAAUiE,IAAI,EAAE;MAC7B,IAAI,CAACA,IAAI,CAACY,YAAY,EAClB,OAAO,KAAK;MAChB,CAAC,CAAC,EAAEzF,MAAM,CAACmF,OAAO,EAAEN,IAAI,CAACG,KAAK,EAAEe,WAAW,CAAClB,IAAI,CAACmB,MAAM,CAAC,EAAEnB,IAAI,CAACY,YAAY,EAAEZ,IAAI,CAACnE,SAAS,IAAID,aAAa,EAAEoE,IAAI,CAAC7D,WAAW,IAAID,eAAe,EAAE,IAAI,EAAEmC,GAAG,CAAC;MAC7J,OAAO,IAAI;IACf,CAAC,CAAC;EACN,CAAC;EACD,IAAIkD,aAAa,GAAG,UAAUvB,IAAI,EAAE;IAChC,IAAI,CAACA,IAAI,EACL,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;IACjB,IAAII,YAAY,GAAGc,WAAW,CAAClB,IAAI,CAACmB,MAAM,CAAC;IAC3C,QAAQnB,IAAI,CAACG,KAAK;MACd,KAAK,QAAQ;QACT,OAAO,CAACC,YAAY,CAAC,CAAC,CAAC,EAAEA,YAAY,CAAC,CAAC,CAAC,CAAC;MAC7C,KAAK,MAAM;MACX,KAAK,MAAM;MACX;QAAS;UACL,IAAIoB,GAAG,GAAGpB,YAAY,CAACzH,MAAM,GAAG,CAAC;UACjC,IAAI0E,EAAE,GAAG+C,YAAY,CAACqB,MAAM,CAAC,UAAUpE,EAAE,EAAEqE,GAAG,EAAEC,GAAG,EAAE;cACjD,IAAIC,CAAC,GAAGvE,EAAE,CAACuE,CAAC;gBAAEC,CAAC,GAAGxE,EAAE,CAACwE,CAAC;cACtB,OAAQ,EAAEF,GAAG,GAAG,CAAC,CAAC,GAAG;gBAAEC,CAAC,EAAEA,CAAC;gBAAEC,CAAC,EAAEA,CAAC,GAAGH,GAAG,GAAGF;cAAI,CAAC,GAAG;gBAAEI,CAAC,EAAEA,CAAC,GAAGF,GAAG,GAAGF,GAAG;gBAAEK,CAAC,EAAEA;cAAE,CAAC;YAChF,CAAC,EAAE;cAAED,CAAC,EAAE,CAAC;cAAEC,CAAC,EAAE;YAAE,CAAC,CAAC;YAAEC,MAAM,GAAGzE,EAAE,CAACuE,CAAC;YAAEG,MAAM,GAAG1E,EAAE,CAACwE,CAAC;UAChD,OAAO,CAACE,MAAM,EAAED,MAAM,CAAC;QAC3B;IAAC;EAET,CAAC;EACD,IAAIlD,YAAY,GAAG,YAAY;IAC3BP,GAAG,CAACI,OAAO,CAAC+B,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEpC,MAAM,CAACK,OAAO,CAACjC,KAAK,EAAE4B,MAAM,CAACK,OAAO,CAACnC,MAAM,CAAC;IACxEwD,oBAAoB,CAAChE,OAAO,CAAC;EACjC,CAAC;EACD,IAAIkG,WAAW,GAAG,YAAY;IAC1B,OAAOjG,GAAG,CAAC+E,KAAK,CAAC/E,GAAG,CAAC,UAAUiE,IAAI,EAAEC,KAAK,EAAE;MACxC,IAAIG,YAAY,GAAGc,WAAW,CAAClB,IAAI,CAACmB,MAAM,CAAC;MAC3C,IAAIc,MAAM,GAAGV,aAAa,CAACvB,IAAI,CAAC;MAChC,IAAIkC,YAAY,GAAG/J,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE6H,IAAI,CAAC,EAAE;QAAEI,YAAY,EAAEA,YAAY;QAAE6B,MAAM,EAAEA;MAAO,CAAC,CAAC;MAC/F,IAAIjC,IAAI,CAACvE,QAAQ,EACb,OAAO,IAAI;MACf,OAAQX,OAAO,CAACwF,OAAO,CAAC6B,aAAa,CAAC,MAAM,EAAE;QAAEC,GAAG,EAAEpC,IAAI,CAACrD,WAAW,CAAC,IAAIsD,KAAK,CAACoC,QAAQ,EAAE;QAAElC,KAAK,EAAEH,IAAI,CAACG,KAAK;QAAEgB,MAAM,EAAEf,YAAY,CAACkC,IAAI,CAAC,GAAG,CAAC;QAAEpF,YAAY,EAAE,UAAUgD,KAAK,EAAE;UAAE,OAAOH,OAAO,CAACmC,YAAY,EAAEjC,KAAK,EAAEC,KAAK,CAAC;QAAE,CAAC;QAAE/C,YAAY,EAAE,UAAU+C,KAAK,EAAE;UAAE,OAAOK,QAAQ,CAAC2B,YAAY,EAAEjC,KAAK,EAAEC,KAAK,CAAC;QAAE,CAAC;QAAEqC,WAAW,EAAE,UAAUrC,KAAK,EAAE;UAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAACoH,SAAS,EAAEN,YAAY,EAAEjC,KAAK,EAAEC,KAAK,EAAE5E,KAAK,CAAC;QAAE,CAAC;QAAEmH,WAAW,EAAE,UAAUvC,KAAK,EAAE;UAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAACsH,SAAS,EAAER,YAAY,EAAEjC,KAAK,EAAEC,KAAK,EAAE5E,KAAK,CAAC;QAAE,CAAC;QAAEqH,SAAS,EAAE,UAAUzC,KAAK,EAAE;UAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAACwH,OAAO,EAAEV,YAAY,EAAEjC,KAAK,EAAEC,KAAK,EAAE5E,KAAK,CAAC;QAAE,CAAC;QAAEuH,YAAY,EAAE,UAAU3C,KAAK,EAAE;UAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAAC0H,UAAU,EAAEZ,YAAY,EAAEjC,KAAK,EAAEC,KAAK,EAAE5E,KAAK,CAAC;QAAE,CAAC;QAAEyH,UAAU,EAAE,UAAU7C,KAAK,EAAE;UAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAAC4H,QAAQ,EAAEd,YAAY,EAAEjC,KAAK,EAAEC,KAAK,EAAE5E,KAAK,CAAC;QAAE,CAAC;QAAE8B,OAAO,EAAE,UAAU8C,KAAK,EAAE;UAAE,OAAOO,KAAK,CAACyB,YAAY,EAAEjC,KAAK,EAAEC,KAAK,CAAC;QAAE,CAAC;QAAE+C,IAAI,EAAEjD,IAAI,CAACiD,IAAI;QAAEC,GAAG,EAAE;MAAM,CAAC,CAAC;IACr5B,CAAC,CAAC;EACN,CAAC;EACD,OAAQpI,OAAO,CAACwF,OAAO,CAAC6B,aAAa,CAAC,KAAK,EAAE;IAAEgB,EAAE,EAAE,YAAY;IAAEvD,KAAK,EAAE,CAAC,CAAC,EAAE3E,QAAQ,CAACqF,OAAO,EAAEhF,KAAK,CAAC,CAAC2C,SAAS;IAAEmF,GAAG,EAAEnF;EAAU,CAAC,EAC5HnD,OAAO,CAACwF,OAAO,CAAC6B,aAAa,CAAC,KAAK,EAAE;IAAEkB,IAAI,EAAE,cAAc;IAAEC,SAAS,EAAE,gBAAgB;IAAE1D,KAAK,EAAEzH,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE8C,QAAQ,CAACqF,OAAO,EAAEhF,KAAK,CAAC,CAAC6C,GAAG,CAAC,EAAG,CAACJ,MAAM,GAAG;MAAEwF,OAAO,EAAE;IAAO,CAAC,GAAG,CAAC,CAAC,CAAE;IAAEtH,GAAG,EAAED,OAAO;IAAEwH,MAAM,EAAE,GAAG,CAAC5I,MAAM,CAACmB,GAAG,CAACoD,IAAI,CAAC;IAAE+D,GAAG,EAAE,KAAK;IAAEE,GAAG,EAAEjF,GAAG;IAAEf,OAAO,EAAE,UAAU8C,KAAK,EAAE;MAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAACqI,UAAU,EAAEvD,KAAK,EAAE5E,KAAK,CAAC;IAAE,CAAC;IAAEiH,WAAW,EAAE,UAAUrC,KAAK,EAAE;MAAE,OAAO,CAAC,CAAC,EAAE9E,QAAQ,CAACsI,cAAc,EAAExD,KAAK,EAAE5E,KAAK,CAAC;IAAE;EAAE,CAAC,CAAC,EACxaR,OAAO,CAACwF,OAAO,CAAC6B,aAAa,CAAC,QAAQ,EAAE;IAAEmB,SAAS,EAAE,mBAAmB;IAAEF,GAAG,EAAEhF,MAAM;IAAEwB,KAAK,EAAE,CAAC,CAAC,EAAE3E,QAAQ,CAACqF,OAAO,GAAG,CAAClC;EAAO,CAAC,CAAC,EAC/HtD,OAAO,CAACwF,OAAO,CAAC6B,aAAa,CAAC,KAAK,EAAE;IAAEmB,SAAS,EAAE,gBAAgB;IAAEnE,IAAI,EAAEpD,GAAG,CAACoD,IAAI;IAAES,KAAK,EAAE,CAAC,CAAC,EAAE3E,QAAQ,CAACqF,OAAO,GAAG,CAACvE;EAAI,CAAC,EAAE6B,UAAU,IAAI,CAACnC,QAAQ,IAAIsC,MAAM,IAAIiE,WAAW,EAAE,CAAC,CAAC;AACtL,CAAC;AACD3G,WAAW,CAACsI,YAAY,GAAGzI,WAAW,CAAC0I,uBAAuB;AAC9DzJ,OAAO,CAACmG,OAAO,GAAGxF,OAAO,CAACwF,OAAO,CAACuD,IAAI,CAACxI,WAAW,EAAE,UAAUyI,SAAS,EAAEC,SAAS,EAAE;EAChF,IAAIC,YAAY,GAAG5J,aAAa,CAACA,aAAa,CAAC,EAAE,EAAEc,WAAW,CAAC+I,iBAAiB,EAAE,IAAI,CAAC,EAAEF,SAAS,CAACG,aAAa,EAAE,IAAI,CAAC;EACvH,IAAIC,WAAW,GAAGH,YAAY,CAACI,IAAI,CAAC,UAAUC,IAAI,EAAE;IAAE,OAAOP,SAAS,CAACO,IAAI,CAAC,KAAKN,SAAS,CAACM,IAAI,CAAC;EAAE,CAAC,CAAC;EACpG,OAAO,CAAC,CAAC,EAAErJ,oBAAoB,CAACsF,OAAO,EAAEwD,SAAS,CAAC/H,GAAG,EAAEgI,SAAS,CAAChI,GAAG,CAAC,IAAI,CAACoI,WAAW;AAC1F,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}